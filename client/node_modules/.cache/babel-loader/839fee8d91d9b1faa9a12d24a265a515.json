{"ast":null,"code":"'use strict';\n\nconst bs58 = require('bs58');\nmodule.exports = {\n  deserialize(data, enc) {\n    enc = enc ? enc.toLowerCase() : 'json';\n    if (enc === 'json') {\n      return deserializeFromJson(data);\n    } else if (enc === 'base64') {\n      return deserializeFromBase64(data);\n    }\n    throw new Error(\"Unsupported encoding: '\".concat(enc, \"'\"));\n  }\n};\nfunction deserializeFromJson(data) {\n  const json = JSON.parse(data);\n  return deserializeFromBase64(json);\n}\nfunction deserializeFromBase64(obj) {\n  if (!isPubsubMessage(obj)) {\n    throw new Error(\"Not a pubsub message\");\n  }\n  return {\n    from: bs58.encode(Buffer.from(obj.from, 'base64')).toString(),\n    seqno: Buffer.from(obj.seqno, 'base64'),\n    data: Buffer.from(obj.data, 'base64'),\n    topicIDs: obj.topicIDs || obj.topicCIDs\n  };\n}\nfunction isPubsubMessage(obj) {\n  return obj && obj.from && obj.seqno && obj.data && (obj.topicIDs || obj.topicCIDs);\n}","map":{"version":3,"names":["bs58","require","module","exports","deserialize","data","enc","toLowerCase","deserializeFromJson","deserializeFromBase64","Error","concat","json","JSON","parse","obj","isPubsubMessage","from","encode","Buffer","toString","seqno","topicIDs","topicCIDs"],"sources":["C:/6th sem/bc/Crime-Records-Blockchain/client/node_modules/ipfs-api/src/utils/pubsub-message-utils.js"],"sourcesContent":["'use strict'\n\nconst bs58 = require('bs58')\n\nmodule.exports = {\n  deserialize (data, enc) {\n    enc = enc ? enc.toLowerCase() : 'json'\n\n    if (enc === 'json') {\n      return deserializeFromJson(data)\n    } else if (enc === 'base64') {\n      return deserializeFromBase64(data)\n    }\n\n    throw new Error(`Unsupported encoding: '${enc}'`)\n  }\n}\n\nfunction deserializeFromJson (data) {\n  const json = JSON.parse(data)\n  return deserializeFromBase64(json)\n}\n\nfunction deserializeFromBase64 (obj) {\n  if (!isPubsubMessage(obj)) {\n    throw new Error(`Not a pubsub message`)\n  }\n\n  return {\n    from: bs58.encode(Buffer.from(obj.from, 'base64')).toString(),\n    seqno: Buffer.from(obj.seqno, 'base64'),\n    data: Buffer.from(obj.data, 'base64'),\n    topicIDs: obj.topicIDs || obj.topicCIDs\n  }\n}\n\nfunction isPubsubMessage (obj) {\n  return obj && obj.from && obj.seqno && obj.data && (obj.topicIDs || obj.topicCIDs)\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAE5BC,MAAM,CAACC,OAAO,GAAG;EACfC,WAAWA,CAAEC,IAAI,EAAEC,GAAG,EAAE;IACtBA,GAAG,GAAGA,GAAG,GAAGA,GAAG,CAACC,WAAW,CAAC,CAAC,GAAG,MAAM;IAEtC,IAAID,GAAG,KAAK,MAAM,EAAE;MAClB,OAAOE,mBAAmB,CAACH,IAAI,CAAC;IAClC,CAAC,MAAM,IAAIC,GAAG,KAAK,QAAQ,EAAE;MAC3B,OAAOG,qBAAqB,CAACJ,IAAI,CAAC;IACpC;IAEA,MAAM,IAAIK,KAAK,2BAAAC,MAAA,CAA2BL,GAAG,MAAG,CAAC;EACnD;AACF,CAAC;AAED,SAASE,mBAAmBA,CAAEH,IAAI,EAAE;EAClC,MAAMO,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACT,IAAI,CAAC;EAC7B,OAAOI,qBAAqB,CAACG,IAAI,CAAC;AACpC;AAEA,SAASH,qBAAqBA,CAAEM,GAAG,EAAE;EACnC,IAAI,CAACC,eAAe,CAACD,GAAG,CAAC,EAAE;IACzB,MAAM,IAAIL,KAAK,uBAAuB,CAAC;EACzC;EAEA,OAAO;IACLO,IAAI,EAAEjB,IAAI,CAACkB,MAAM,CAACC,MAAM,CAACF,IAAI,CAACF,GAAG,CAACE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;IAC7DC,KAAK,EAAEF,MAAM,CAACF,IAAI,CAACF,GAAG,CAACM,KAAK,EAAE,QAAQ,CAAC;IACvChB,IAAI,EAAEc,MAAM,CAACF,IAAI,CAACF,GAAG,CAACV,IAAI,EAAE,QAAQ,CAAC;IACrCiB,QAAQ,EAAEP,GAAG,CAACO,QAAQ,IAAIP,GAAG,CAACQ;EAChC,CAAC;AACH;AAEA,SAASP,eAAeA,CAAED,GAAG,EAAE;EAC7B,OAAOA,GAAG,IAAIA,GAAG,CAACE,IAAI,IAAIF,GAAG,CAACM,KAAK,IAAIN,GAAG,CAACV,IAAI,KAAKU,GAAG,CAACO,QAAQ,IAAIP,GAAG,CAACQ,SAAS,CAAC;AACpF","ignoreList":[]},"metadata":{},"sourceType":"script"}